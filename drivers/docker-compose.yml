services:
  # fast caching server to record visited websites
  redis:
    image: redis:alpine
    container_name: redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: always

  # rabbit:
  #   image: rabbitmq:4-management
  #   container_name: rabbitmq
  #   ports:
  #     - "5672:5672" # AMQP protocol for messaging
  #     - "15672:15672" # Management UI
  #   volumes:
  #     - rabbitmq_data:/var/lib/rabbitmq/
  #   environment:
  #     - RABBITMQ_DEFAULT_USER=${RABBITMQ_USER}
  #     - RABBITMQ_DEFAULT_PASS=${RABBITMQ_PASS}

  # Apache Storm to process large amounts of data!
  zookeeper:
    image: zookeeper
    container_name: zookeeper
    restart: always
  nimbus:
    image: storm
    container_name: nimbus
    command: storm nimbus
    depends_on:
      - zookeeper
    links:
      - zookeeper
    restart: always
    ports:
      - "6627:6627"
  supervisor:
    image: storm
    container_name: supervisor
    command: storm supervisor
    depends_on:
      - nimbus
      - zookeeper
    links:
      - nimbus
      - zookeeper
    restart: always

volumes:
  redis_data:
  rabbitmq_data:
